(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{219:function(e,t,a){e.exports=a(394)},224:function(e,t,a){},229:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),l=a.n(o),i=(a(224),a(399)),c=a(16),s=a(42),u=a(41),d=a(152),p=a(4),m="[login] logout",g={token:null,loading:!1,loaded:!1,error:null},h={user:{id:"",login:"",password:""},isLogined:!1,isAuthor:!1,loading:!1,loaded:!1,error:null},f={isNameInputValid:!1,isPasswordInputValid:!1,isCommentInputValid:!1,isCategoryInputValid:!1,isTitleInputValid:!1,isBodyInputValid:!1,error:null},y={categories:[],category:null,loading:!1,loaded:!1,error:null},b={posts:[],loading:!1,loaded:!1,error:null},v={post:{id:"",title:"",body:"",author_id:"",author_name:"",category_id:"",category_name:""},loading:!1,loaded:!1,error:null},E={comments:[],loading:!1,error:null},O=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[login] login start":return Object(p.a)({},e,{loading:!0,error:null});case"[login] login success":return Object(p.a)({},e,{token:t.token,loading:!1,loaded:!0,error:null});case"[login] login fail":return Object(p.a)({},e,{loading:!1,error:t.error});case"[auth] auth start":return Object(p.a)({},e,{loading:!0,error:null});case"[auth] auth success":return Object(p.a)({},e,{token:t.token,loading:!1,loaded:!0,error:null});case"[auth] auth fail":return Object(p.a)({},e,{loading:!1,error:t.error});case m:return Object(p.a)({},e,{token:null,loaded:!1});default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[user] get user by token start":return Object(p.a)({},e,{loading:!0,error:null});case"[user] get user by token success":return Object(p.a)({},e,{user:t.user,loading:!1,loaded:!0,error:null});case"[user] get user by token fail":return Object(p.a)({},e,{loading:!1,error:t.error});case"[user] is logined":return Object(p.a)({},e,{isLogined:t.isLogined,error:null});case"[user] set is author":return Object(p.a)({},e,{isAuthor:t.flag});case m:return Object(p.a)({},e,{user:{id:"",login:"",password:""},isLogined:!1,loaded:!1});default:return e}},validation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[validation] is name input valid":return Object(p.a)({},e,{isNameInputValid:t.flag,error:null});case"[validation] is password input valid":return Object(p.a)({},e,{isPasswordInputValid:t.flag,error:null});case"[validation] is comment input valid":return Object(p.a)({},e,{isCommentInputValid:t.flag,error:null});case"[validation] is category input valid":return Object(p.a)({},e,{isCategoryInputValid:t.flag,error:null});case"[validation] is title post input valid":return Object(p.a)({},e,{isTitleInputValid:t.flag,error:null});case"[validation] is body post input valid":return Object(p.a)({},e,{isBodyInputValid:t.flag,error:null});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[category] get all categories start":return Object(p.a)({},e,{loading:!0,error:null});case"[category] get all categories success":return Object(p.a)({},e,{loading:!1,loaded:!0,categories:t.categories});case"[category] get all categories fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});case"[category] get single category by id start":return Object(p.a)({},e,{loading:!0,error:null});case"[category]  single category by id success":return Object(p.a)({},e,{loading:!1,loaded:!0,category:t.category});case"[category] get single category by id fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});default:return e}},allPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[post] get all posts start":return Object(p.a)({},e,{loading:!0,error:null});case"[post] get all posts success":return Object(p.a)({},e,{loading:!1,loaded:!0,posts:t.posts});case"[post] get all posts fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});case"[post] get all posts by author id start":return Object(p.a)({},e,{loading:!0,error:null});case"[post] get all posts by author id success":return Object(p.a)({},e,{loading:!1,loaded:!0,posts:t.posts});case"[post] get all posts by author id fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});case"[post] get all posts by category start":return Object(p.a)({},e,{loading:!0,error:null});case"[post] get all posts by category success":return Object(p.a)({},e,{loading:!1,loaded:!0,posts:t.posts});case"[post] get all posts by category fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});default:return e}},currentPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[post] get post by id start":return Object(p.a)({},e,{loading:!0,error:null});case"[post] get post by id success":return Object(p.a)({},e,{loading:!1,loaded:!0,post:t.post});case"[post] get post by id fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});case"[post] create post start":return Object(p.a)({},e,{loading:!0,error:null});case"[post] create post success":return Object(p.a)({},e,{loading:!1,loaded:!0});case"[post] create post fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});case"[post] update post start":return Object(p.a)({},e,{loading:!0,error:null});case"[post] update post success":return Object(p.a)({},e,{loading:!1,loaded:!0});case"[post] update post fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});case"[post] delete post start":return Object(p.a)({},e,{loading:!0,error:null});case"[post] delete post success":return Object(p.a)({},e,{loading:!1,loaded:!0});case"[post] delete post fail":return Object(p.a)({},e,{loading:!1,loaded:!1,error:t.error});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[comment] get comments by post id start":return Object(p.a)({},e,{loading:!0,error:null});case"[comment] get comments by post id success":return Object(p.a)({},e,{loading:!1,comments:t.comments});case"[comment] get comments by post id fail":return Object(p.a)({},e,{loading:!1,error:t.error});case"[comment] create comment start":return Object(p.a)({},e,{loading:!0,error:null});case"[comment] create comment success":return Object(p.a)({},e,{loading:!1});case"[comment] create comment fail":return Object(p.a)({},e,{loading:!1,error:t.error});default:return e}}}),C=[d.a],j=Object(u.d)(u.a.apply(void 0,C),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),w=Object(u.e)(O,{},j),k=a(17),P=a(18),I=a(20),x=a(19),S=a(21),A=a(400),N=a(397),V=a(398),_=a(401),D=(a(229),a(396)),L=a(10),B=a(70),F=a.n(B),T=a(71),U=a.n(T),G=a(154),R=a(25),W=a.n(R),H=a(153),M=a.n(H).a.create({baseURL:"https://cors-anywhere.herokuapp.com/https://incode-blog-internship.herokuapp.com",headers:localStorage.getItem("token")?{Authorization:"Bearer ".concat(localStorage.getItem("token"))}:{}}),z=function(e){return{type:"[user] is logined",isLogined:e}},X=function(){return function(e){localStorage.removeItem("token"),M.defaults.headers.common={},e({type:m}),e(z(!1))}},J=function(){return function(e){e({type:"[user] get user by token start"}),M.get("/user").then(function(t){e({type:"[user] get user by token success",user:t.data}),e(z(!0))}).catch(function(t){e({type:"[user] get user by token fail",error:t})})}},Y=function(e){return{type:"[validation] is name input valid",flag:e}},$=function(e){return{type:"[validation] is password input valid",flag:e}},q=function(){return function(e){e({type:"[category] get all categories start"}),M.get("/category").then(function(t){e({type:"[category] get all categories success",categories:t.data.categories})}).catch(function(t){e({type:"[category] get all categories fail",error:t})})}},K=function(e){return function(t){t({type:"[post] get all posts by author id start"}),M.get("/post/author/".concat(e)).then(function(e){t({type:"[post] get all posts by author id success",posts:e.data.data})}).catch(function(e){t({type:"[post] get all posts by author id fail",error:e})})}},Q=function(e,t){return function(a){a({type:"[post] delete post start"}),M.delete("/post/".concat(e)).then(function(e){a((e.data.data,{type:"[post] delete post success"})),a(K(t))}).catch(function(e){a({type:"[post] delete post fail",error:e})})}},Z=function(e){return function(t){t({type:"[post] get post by id start"}),M.get("/post/".concat(e)).then(function(e){t({type:"[post] get post by id success",post:e.data.data})}).catch(function(e){t({type:"[post] get post by id fail",error:e})})}},ee=function(e){return function(t){t({type:"[comment] get comments by post id start"}),M.get("/comment/".concat(e)).then(function(e){t({type:"[comment] get comments by post id success",comments:e.data.comments})}).catch(function(e){t({type:"[comment] get comments by post id fail",error:e})})}},te=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={},a.onHandleLogout=function(){(0,a.props.onLogout)()},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"showNavBar",value:function(){var e=this,t=this.props,a=t.classes,n=t.isAutenticated,o=t.userId;switch(n){case!1:return r.a.createElement("div",null,r.a.createElement(D.a,{className:a.link,to:"/login"},r.a.createElement(W.a,{color:"inherit"},"Login")),r.a.createElement(D.a,{className:a.link,to:"/register"},r.a.createElement(W.a,{color:"inherit"},"Register")));default:return r.a.createElement("div",null,r.a.createElement(D.a,{className:a.link,to:"/main"},r.a.createElement(W.a,{color:"inherit"},"Main")),r.a.createElement(D.a,{className:a.link,to:"/author/".concat(o)},r.a.createElement(W.a,{color:"inherit"},"My Page")),r.a.createElement(W.a,{color:"inherit",onClick:e.onHandleLogout},"Logout"))}}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(F.a,{position:"static"},r.a.createElement(U.a,null,r.a.createElement(G.a,{variant:"h6",color:"inherit",className:e.grow},"Incode Blog"),this.showNavBar())))}}]),t}(r.a.Component),ae={onLogout:X},ne=Object(c.b)(function(e){return{isAutenticated:e.currentUser.isLogined,userId:e.currentUser.user.id}},ae)(Object(L.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},link:{color:"white",textDecoration:"none"}})(te)),re=a(32),oe=a.n(re),le=a(53),ie=a.n(le),ce=a(39),se=a.n(ce),ue=a(27),de=a.n(ue),pe=a(28),me=a.n(pe),ge=function(e){var t=e.id,a=e.title,n=e.selected,o=e.onClick;return r.a.createElement(de.a,{button:!0,id:t,selected:n,onClick:o},r.a.createElement(me.a,{primary:a}))},he=a(72),fe=a.n(he);var ye=Object(L.withStyles)(function(e){return{progress:{margin:2*e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(fe.a,{className:t.progress,color:"primary",size:50}))}),be=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(o)))).state={selectedIndex:-1},a.handleSelectedCategory=function(e,t){a.setState({selectedIndex:e}),(0,a.props.onGetAllPostsByCategory)(t)},a.handlePreloader=function(e){return e?r.a.createElement(ye,null):r.a.createElement("div",null,"Sometime went wrong :(")},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.onGetAllCategories)()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.loaded,o=t.categories,l=t.classes,i=this.state.selectedIndex;return n?r.a.createElement("div",{className:l.root},r.a.createElement(se.a,{component:"nav"},o.map(function(t){return r.a.createElement(ge,{key:t.id,id:t.id,title:t.title,description:t.description,selected:i===t.id,onClick:function(){return e.handleSelectedCategory(t.id,t.title)}})}))):this.handlePreloader(a)}}]),t}(r.a.Component),ve={onGetAllCategories:q,onGetAllPostsByCategory:function(e){return function(t){t({type:"[post] get all posts by category start"}),M.get("/post/category/".concat(e)).then(function(e){t({type:"[post] get all posts by category success",posts:e.data.posts})}).catch(function(e){t({type:"[post] get all posts by category fail",error:e})})}}},Ee=Object(L.withStyles)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})(Object(c.b)(function(e){return{loading:e.categories.loading,loaded:e.categories.loaded,categories:e.categories.categories}},ve)(be)),Oe=a(36),Ce=a.n(Oe),je=a(51),we=a.n(je),ke=a(44),Pe=a.n(ke),Ie=a(33),xe=a.n(Ie),Se=a(26),Ae=a.n(Se),Ne=a(40),Ve=a.n(Ne),_e=a(73),De=a.n(_e),Le=a(74),Be=a.n(Le),Fe=a(75),Te=a.n(Fe),Ue=a(80),Ge=a.n(Ue),Re=a(79),We=a.n(Re),He=a(81),Me=a.n(He),ze=Object(L.withStyles)(function(){return{card:{maxWidth:400},actions:{display:"flex"},avatar:{}}})(function(e){var t=e.classes,a=e.handleCurrentPost,n=e.handleAuthorPosts,o=e.handleColor,l=e.authorAvatar,i=e.authorColor,c=e.authorName,s=e.categoryName,u=e.body;return r.a.createElement(Ce.a,{className:t.card},r.a.createElement(we.a,{avatar:r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{"aria-label":"Avatar",className:t.avatar,onClick:n,style:{backgroundColor:i}},l)),action:r.a.createElement(Ae.a,null,r.a.createElement(We.a,{onClick:a})),title:c,subheader:s}),r.a.createElement(Pe.a,null,r.a.createElement(De.a,null,r.a.createElement(Be.a,{expandIcon:r.a.createElement(Ge.a,null)}),r.a.createElement(Te.a,null,r.a.createElement(de.a,null,r.a.createElement(Ve.a,null,r.a.createElement(xe.a,{style:{backgroundColor:o()}},r.a.createElement(Me.a,null))),r.a.createElement(me.a,{primary:u}))))))}),Xe=function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);var n="#";for(a=0;a<3;a++)n+="00".concat((t>>8*a&255).toString(16)).substr(-2);return n},Je=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(o)))).state={expanded:!1},a.handlePreloader=function(e){return e?r.a.createElement(ye,null):r.a.createElement(se.a,{component:"nav"},r.a.createElement(de.a,null,r.a.createElement(me.a,{primary:"No post here  :("})))},a.handleColor=function(e){return Xe(e)},a.handleAuthorAvatar=function(e){return"".concat(e.charAt(0)).concat(e.charAt(e.length-1)).toUpperCase()},a.handleCurrentPost=function(e){a.props.history.push("/post/".concat(e))},a.handleAuthorPosts=function(e){a.props.history.push("/author/".concat(e))},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.handleColor=function(e){return Xe(e)},a.handleDeletePost=function(e,t){(0,a.props.onDeletePosts)(e,t)},a.handleUpdatePost=function(e){a.props.history.push("/post/update/".concat(e))},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.onGetAllPosts)()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.loaded,o=t.posts,l=t.classes,i=this.state.expanded;return n&&0!==o.length?r.a.createElement("div",{className:l.root},r.a.createElement(se.a,{component:"nav"},o.map(function(t){return r.a.createElement(ze,{key:t.id,id:t.id,title:t.title,body:t.body,authorColor:e.handleColor(t.author_name||"Anonymous"),authorAvatar:e.handleAuthorAvatar(t.author_name||"Anonymous"),authorId:t.author_id,authorName:t.author_name,categoryId:t.category_id,categoryName:t.category_name,handleCurrentPost:function(){return e.handleCurrentPost(t.id)},handleAuthorPosts:function(){return e.handleAuthorPosts(t.author_id)},handleExpandClick:function(){return e.handleExpandClick()},handleColor:function(){return e.handleColor(t.body)},handleDeletePost:function(){return e.handleDeletePost(t.id,t.author_id)},handleUpdatePost:function(){return e.handleUpdatePost(t.id)},expanded:i})}))):this.handlePreloader(a)}}]),t}(r.a.Component),Ye={onGetAllPosts:function(){return function(e){e({type:"[post] get all posts start"}),M.get("/post").then(function(t){e({type:"[post] get all posts success",posts:t.data.data})}).catch(function(t){e({type:"[post] get all posts fail",error:t})})}},onGetPostById:Z,onDeletePosts:Q,onUpdatePosts:function(e,t,a,n,r,o,l){return function(i){var c={title:t,body:a,author_id:n,author_name:r,category_id:o,category_name:l};i({type:"[post] update post start"}),M.put("/post/".concat(e),c).then(function(e){i((e.data.data,{type:"[post] update post success"})),i(K(n))}).catch(function(e){i({type:"[post] update post fail",error:e})})}}},$e=Object(L.withStyles)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:4*e.spacing.unit}}})(Object(_.a)(Object(c.b)(function(e){return{loading:e.allPosts.loading,loaded:e.allPosts.loaded,posts:e.allPosts.posts}},Ye)(Je)));var qe=Object(L.withStyles)(function(e){return{container:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridGap:"".concat(3*e.spacing.unit,"px")},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",marginBottom:e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(ie.a,{container:!0,spacing:24},r.a.createElement(ie.a,{item:!0,xs:4},r.a.createElement(oe.a,{className:t.paper},r.a.createElement(Ee,null))),r.a.createElement(ie.a,{item:!0,xs:8},r.a.createElement($e,null))))}),Ke=a(29),Qe=a.n(Ke),Ze=function(e){var t=!0;return t=""!==e.trim()&&t,t=e.length>=3&&t,t=e.length<=16&&t},et=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",password:"",touchedName:!1,touchedPassword:!1},a.handleChangeName=function(e){(0,a.props.onSetNameInputValid)(Ze(e.target.value)),a.setState({touchedName:!0,name:e.target.value})},a.handleChangePassword=function(e){(0,a.props.onSetPasswordInputValid)(Ze(e.target.value)),a.setState({touchedPassword:!0,password:e.target.value})},a.submitHandler=function(e){e.preventDefault();var t=a.props.handleLogin,n=a.state;t(n.name,n.password)},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props,t=e.nameFieldValid,a=e.passwordFieldValid,n=this.state,o=n.name,l=n.touchedName,i=n.touchedPassword,c=this.props.classes;return r.a.createElement("form",{className:c.container,noValidate:!0,autoComplete:"off",onSubmit:this.submitHandler},r.a.createElement(Qe.a,{id:"outlined-name-input",label:"Name",className:c.textField,name:"name",value:o,onChange:this.handleChangeName,autoComplete:"on",margin:"normal",variant:"outlined",error:!t&&l}),r.a.createElement(Qe.a,{id:"outlined-password-input",label:"Password",className:c.textField,type:"password",onChange:this.handleChangePassword,autoComplete:"on",margin:"normal",variant:"outlined",error:!a&&i}),r.a.createElement(W.a,{type:"submit",variant:"contained",color:"secondary",className:c.button,disabled:!(t&&a)},"Login"))}}]),t}(n.Component),tt={handleLogin:function(e,t){return function(a){a({type:"[login] login start"});var n={login:e,password:t};M.post("/login",n).then(function(e){localStorage.setItem("token",e.data.token),M.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("token")),a({type:"[login] login success",token:e.data.token}),a(J())}).catch(function(e){a({type:"[login] login fail",error:e})})}},onSetNameInputValid:Y,onSetPasswordInputValid:$},at=Object(c.b)(function(e){return{isLogined:e.auth.isLogined,nameFieldValid:e.validation.isNameInputValid,passwordFieldValid:e.validation.isPasswordInputValid}},tt)(Object(L.withStyles)(function(e){return{typography:{useNextVariants:!0},container:{display:"flex",flexDirection:"column",flexWrap:"wrap",margin:"auto",width:300},textField:{marginLeft:e.spacing.auto,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200}}})(et)),nt=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",password:"",touchedName:!1,touchedPassword:!1},a.handleChangeName=function(e){(0,a.props.onSetNameInputValid)(Ze(e.target.value)),a.setState({touchedName:!0,name:e.target.value})},a.handleChangePassword=function(e){(0,a.props.onSetPasswordInputValid)(Ze(e.target.value)),a.setState({touchedPassword:!0,password:e.target.value})},a.submitHandler=function(e){e.preventDefault();var t=a.props.tryRegistration,n=a.state;t(n.name,n.password)},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.nameFieldValid,n=e.passwordFieldValid,o=this.state,l=o.name,i=o.touchedName,c=o.touchedPassword;return r.a.createElement("div",null,r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:this.submitHandler},r.a.createElement(Qe.a,{id:"outlined-name",label:"Name",className:t.textField,value:l,onChange:this.handleChangeName,margin:"normal",variant:"outlined",error:!a&&i}),r.a.createElement(Qe.a,{id:"outlined-password-input",label:"Password",className:t.textField,type:"password",onChange:this.handleChangePassword,autoComplete:"current-password",margin:"normal",variant:"outlined",error:!n&&c}),r.a.createElement(W.a,{type:"submit",variant:"contained",color:"secondary",className:t.button,disabled:!(a&&n)},"auth")))}}]),t}(n.Component),rt={tryRegistration:function(e,t){return function(a){a({type:"[auth] auth start"});var n={login:e,password:t};M.post("/auth",n).then(function(e){localStorage.setItem("token",e.data.token),M.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("token")),a({type:"[auth] auth success",token:e.data.token}),a(J())}).catch(function(e){a({type:"[auth] auth fail",error:e})})}},onSetNameInputValid:Y,onSetPasswordInputValid:$},ot=Object(c.b)(function(e){return{nameFieldValid:e.validation.isNameInputValid,passwordFieldValid:e.validation.isPasswordInputValid}},rt)(Object(L.withStyles)(function(e){return{typography:{useNextVariants:!0},container:{display:"flex",flexDirection:"column",flexWrap:"wrap",margin:"auto",width:300},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20}}})(nt)),lt=a(45),it=a(35),ct=a.n(it),st=a(52),ut=a.n(st),dt=a(85),pt=a.n(dt),mt=a(155),gt=a.n(mt),ht=a(76),ft=a.n(ht),yt=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={category:"",categoryId:void 0,title:"",body:"",touchedCategory:!1,touchedTitle:!1,touchedBody:!1},a.handleChangeCategory=function(e){(0,a.props.onSetCategoryInputValid)(Ze(e.target.value)),a.setState({touchedCategory:!0,category:e.target.value})},a.handleChangeTitle=function(e){(0,a.props.onSetTitleInputValid)(Ze(e.target.value)),a.setState({touchedTitle:!0,title:e.target.value})},a.handleChangeBody=function(e){(0,a.props.onSetBodyInputValid)(Ze(e.target.value)),a.setState({touchedBody:!0,body:e.target.value})},a.submitHandler=function(e){e.preventDefault();var t=a.props,n=t.onCreatePosts,r=t.user,o=a.state,l=o.title,i=o.body,c=o.categoryId,s=o.category;n(l,i,r.id,r.login,c,s),a.setState({category:"",categoryId:void 0,title:"",body:"",touchedCategory:!1,touchedTitle:!1,touchedBody:!1})},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.onGetAllCategories)()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.categories,n=e.categoryInputValid,o=e.titleInputValid,l=e.bodyInputValid,i=this.state,c=i.category,s=i.title,u=i.body,d=i.touchedCategory,p=i.touchedTitle,m=i.touchedBody;return r.a.createElement("div",null,r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(Qe.a,{id:"title",label:"Title",value:s,placeholder:"Title",className:t.textField,margin:"normal",variant:"filled",onChange:this.handleChangeTitle,error:!o&&p}),r.a.createElement(Qe.a,{id:"filled-select-category",select:!0,label:"Select category",className:t.textField,value:c,onChange:this.handleChangeCategory,error:!n&&d,SelectProps:{MenuProps:{className:t.menu}},helperText:"Please select category",margin:"normal",variant:"filled"},a.map(function(e){return r.a.createElement(ft.a,{key:e.id,value:e.title},e.title)})),r.a.createElement(Qe.a,{id:"body",label:"Write Post",multiline:!0,rows:"4",value:u,placeholder:"Write Post",className:t.textField,margin:"normal",variant:"filled",onChange:this.handleChangeBody,error:!l&&m})),r.a.createElement(W.a,{type:"submit",variant:"contained",color:"secondary",className:t.button,onClick:this.submitHandler,disabled:!(n&&o&&l)},"Create Post"))}}]),t}(r.a.Component),bt={onGetAllCategories:q,onGetSingleCategoryById:function(e){return function(t){t({type:"[category] get single category by id start"}),M.get("category/".concat(e)).then(function(e){console.log(e.data),t({type:"[category]  single category by id success",category:e.data.category})}).catch(function(e){t({type:"[category] get single category by id fail",error:e})})}},onSetCategoryInputValid:function(e){return{type:"[validation] is category input valid",flag:e}},onSetTitleInputValid:function(e){return{type:"[validation] is title post input valid",flag:e}},onSetBodyInputValid:function(e){return{type:"[validation] is body post input valid",flag:e}},onCreatePosts:function(e,t,a,n,r,o){return function(l){var i={title:e,body:t,author_id:a,author_name:n,category_id:r,category_name:o};l({type:"[post] create post start"}),M.post("/post",i).then(function(e){l((e.data,{type:"[post] create post success"})),l(K(a))}).catch(function(e){l({type:"[post] create post fail",error:e})})}}},vt=Object(L.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200}}})(Object(c.b)(function(e){return{categories:e.categories.categories,categoryInputValid:e.validation.isCategoryInputValid,titleInputValid:e.validation.isTitleInputValid,bodyInputValid:e.validation.isBodyInputValid,categoryId:e.categories.categories,user:e.currentUser.user}},bt)(yt)),Et=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(o)))).state={},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.handleColor=function(e){return Xe(e)},a.handleAuthorAvatar=function(e){return"".concat(e.charAt(0)).concat(e.charAt(e.length-1)).toUpperCase()},a.handleDeletePost=function(e,t){(0,a.props.onDeletePosts)(e,t)},a.handleUpdatePost=function(){console.log("Coming soon")},a.handleCurrentPost=function(e){a.props.history.push("/post/".concat(e))},a.handlePostLength=function(e){return e.length>70?"".concat(e.substring(0,67),"..."):e},a.handlePreloader=function(e){return e?r.a.createElement(ye,null):r.a.createElement("div",null,"Sometime went wrong :(")},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.onGetAllPostsByAuthorId,n=e.onSetIsAuthor,r=e.currentUserId;a(t.params.id),n(r===t.params.id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.userPosts,l=t.currentUserId,i=t.isAuthor;return r.a.createElement(Ce.a,{className:a.card},i?r.a.createElement(vt,null):null,0!==o.length?o.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(oe.a,{className:a.paper},r.a.createElement(de.a,null,r.a.createElement(Ve.a,null,r.a.createElement(xe.a,{style:{backgroundColor:e.handleColor(t.title)}},r.a.createElement(Me.a,null))),r.a.createElement(me.a,{primary:t.title}),r.a.createElement(ut.a,null,r.a.createElement(Ae.a,{"aria-label":"Forward",onClick:function(){return e.handleCurrentPost(t.id)}},r.a.createElement(We.a,null)))),r.a.createElement(de.a,null,r.a.createElement(me.a,{primary:e.handlePostLength(t.body)})),r.a.createElement(de.a,null,r.a.createElement(me.a,{primary:t.category_name}),i?r.a.createElement(n.Fragment,null,r.a.createElement(Ae.a,{"aria-label":"Edit",onClick:function(){return e.handleUpdatePost(t.id)}},r.a.createElement(gt.a,null)),r.a.createElement(Ae.a,{"aria-label":"Delete",onClick:function(){return e.handleDeletePost(t.id,l)}},r.a.createElement(pt.a,null))):null)))}):r.a.createElement(Ce.a,null,r.a.createElement(ct.a,null,"No any post here :(")))}}]),t}(r.a.Component),Ot={onGetAllPostsByAuthorId:K,onDeletePosts:Q,onSetIsAuthor:function(e){return{type:"[user] set is author",flag:e}}},Ct=Object(L.withStyles)(function(e){return{card:{display:"flex",flexDirection:"column",flexWrap:"wrap",margin:"auto",maxWidth:400},actions:{display:"flex"},expand:Object(lt.a)({transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),marginLeft:"auto"},e.breakpoints.up("sm"),{marginRight:-8}),expandOpen:{transform:"rotate(180deg)"},avatar:{}}})(Object(c.b)(function(e){return{currentUserId:e.currentUser.user.id,userPosts:e.allPosts.posts,isAuthor:e.currentUser.isAuthor}},Ot)(Et)),jt=a(6),wt=a.n(jt),kt=a(77),Pt=a.n(kt),It=a(59),xt=a.n(It),St=a(115),At=a.n(St),Nt=a(156),Vt=a.n(Nt),_t=a(157),Dt=a.n(_t),Lt=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={comment:"",touchedComment:!1},a.handleChangeComment=function(e){(0,a.props.onSetCommentInputValid)(Ze(e.target.value)),a.setState({touchedComment:!0,comment:e.target.value})},a.submitHandler=function(e){e.preventDefault();var t=a.props,n=t.onCreateComment,r=t.postId,o=t.authorId,l=t.authorName;n(a.state.comment,o,l,r),a.setState({comment:"",touchedComment:!1})},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.commentFieldValid,n=this.state,o=n.comment,l=n.touchedComment;return r.a.createElement("div",null,r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(Qe.a,{id:"outlined-multiline-static",label:"Leave comment",multiline:!0,rows:"4",placeholder:"Your comment",value:o,className:t.textField,margin:"normal",variant:"outlined",onChange:this.handleChangeComment,error:!a&&l})),r.a.createElement(W.a,{type:"submit",variant:"contained",color:"secondary",className:t.button,disabled:!a,onClick:this.submitHandler},"Send"))}}]),t}(r.a.Component),Bt={onSetCommentInputValid:function(e){return{type:"[validation] is comment input valid",flag:e}},onCreateComment:function(e,t,a,n){return function(r){r({type:"[comment] create comment start"});var o={body:e,author_id:t,author_name:a,post_id:n};M.post("/comment/".concat(n),o).then(function(){r({type:"[comment] create comment success"}),r(ee(n))}).catch(function(e){r({type:"[comment] create comment fail",error:e})})}}},Ft=Object(L.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200}}})(Object(c.b)(function(e){return{commentFieldValid:e.validation.isCommentInputValid,postId:e.currentPost.post.id,authorId:e.currentUser.user.id,authorName:e.currentUser.user.login}},Bt)(Lt)),Tt=function(e){function t(){var e,a;Object(k.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(o)))).state={expanded:!1},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.handleDeleteComment=function(e){var t=a.props,n=t.match;(0,t.onDeleteComment)(n.params.id,e)},a.handleColor=function(e){return Xe(e)},a.handleAuthorAvatar=function(e){return"".concat(e.charAt(0)).concat(e.charAt(e.length-1)).toUpperCase()},a.handlePreloader=function(e){return e?r.a.createElement(ye,null):r.a.createElement("div",null,"Sometime went wrong :(")},a}return Object(S.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.onGetPostById,n=e.onGetCommentsByPostId,r=t.params.id;a(r),n(r)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loaded,n=t.loading,o=t.classes,l=t.post,i=t.comments,c=this.state.expanded;return a?r.a.createElement(Ce.a,{className:o.card},r.a.createElement(we.a,{avatar:r.a.createElement(xe.a,{"aria-label":"Recipe",style:{backgroundColor:this.handleColor(l.author_name)}},this.handleAuthorAvatar(l.author_name)),title:l.author_name,subheader:l.title}),r.a.createElement(Pe.a,null,r.a.createElement(ct.a,{component:"p"},l.body),r.a.createElement(ct.a,{component:"p"},l.category_name)),r.a.createElement(Pt.a,{className:o.actions,disableActionSpacing:!0},r.a.createElement(Ae.a,{"aria-label":"Add to favorites"},r.a.createElement(Vt.a,null)),r.a.createElement(Ae.a,{"aria-label":"Share"},r.a.createElement(Dt.a,null)),r.a.createElement(Ae.a,{className:wt()(o.expand,Object(lt.a)({},o.expandOpen,c)),onClick:this.handleExpandClick,"aria-expanded":c,"aria-label":"Show more"},r.a.createElement(Ge.a,null))),r.a.createElement(xt.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ft,null),r.a.createElement(Pe.a,null,i.map(function(t){return r.a.createElement(de.a,{key:t.id},r.a.createElement(Ve.a,null,r.a.createElement(xe.a,{style:{backgroundColor:e.handleColor(t.author_name||"Anonymous")}},e.handleAuthorAvatar(t.author_name||"Anonymous"))),r.a.createElement(me.a,{primary:t.author_name}),r.a.createElement(me.a,{primary:t.body}),r.a.createElement(ut.a,null,r.a.createElement(Ae.a,{"aria-label":"Delete"},r.a.createElement(pt.a,{onClick:function(){return e.handleDeleteComment(t.id)}}))))})))):this.handlePreloader(n)}}]),t}(r.a.Component),Ut={onGetPostById:Z,onDeleteComment:function(e,t){return function(a){a({type:"[comment] delete comment start"}),M.delete("/comment/".concat(t)).then(function(){a({type:"[comment] delete comment success"}),a(ee(e))}).catch(function(e){a({type:"[comment] delete comment fail",error:e})})}},onGetCommentsByPostId:ee},Gt=Object(L.withStyles)(function(e){return{card:{display:"flex",flexDirection:"column",flexWrap:"wrap",margin:"auto",maxWidth:400},actions:{display:"flex"},expand:Object(lt.a)({transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),marginLeft:"auto"},e.breakpoints.up("sm"),{marginRight:-8}),expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:At.a[500]}}})(Object(c.b)(function(e){return{loading:e.currentPost.loading,loaded:e.currentPost.loaded,post:e.currentPost.post,comments:e.comments.comments}},Ut)(Tt)),Rt=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.onTryAutoSignup)()}},{key:"render",value:function(){var e=this.props.isAutenticated,t=r.a.createElement(A.a,null,r.a.createElement(N.a,{path:"/login",component:at}),r.a.createElement(N.a,{path:"/register",component:ot}),r.a.createElement(V.a,{to:"/login"}));return e&&(t=r.a.createElement(A.a,null,r.a.createElement(N.a,{exact:!0,path:"/main",component:qe}),r.a.createElement(N.a,{exact:!0,path:"/author/:id",component:Ct}),r.a.createElement(N.a,{exact:!0,path:"/post/:id",component:Gt}),r.a.createElement(V.a,{to:"/main"}))),r.a.createElement(n.Fragment,null,r.a.createElement(ne,null),t)}}]),t}(n.Component),Wt={onTryAutoSignup:function(){return function(e){e(localStorage.getItem("token")?J():X())}}},Ht=Object(_.a)(Object(c.b)(function(e){return{isAutenticated:e.currentUser.isLogined}},Wt)(Rt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Mt=Object(s.a)({basename:"/codeme-app"}),zt=r.a.createElement(c.a,{store:w},r.a.createElement(i.a,{history:Mt},r.a.createElement(Ht,null)));l.a.render(zt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[219,2,1]]]);
//# sourceMappingURL=main.0a65c80a.chunk.js.map